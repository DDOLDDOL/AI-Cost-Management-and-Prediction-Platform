{% extends "base.html" %}
{% load static %}

{% block scripts %}
    {{ block.super }}
    <script>
         // https://docs.djangoproject.com/en/3.1/ref/csrf/
        function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    // Does this cookie string begin with the name we want?
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }

        var csrftoken = getCookie('csrftoken');
        var xhr;

    </script>
{% endblock %}

{% block body %}

    {% include "navbar.html" %}
    {% include "sidebar.html" %}

    <!--main content start-->
    <section id="main-content">
        <section class="wrapper">
            <div class="row">
                <div class="col-lg-12">
                    <h3 class="page-header"><i class="fa fa-table"></i>원가요소계정</h3>
                </div>
            </div>
            <div class="row">
            <div class="col-lg-12">
                <section class="panel">
                    <div class="table-responsive">

                        <table class="table">
                            <thead>
                            <tr>
                                <th width="15%">손익코드</th>
                                <th width="20%">손익명</th>
                                <th width="15%">계정코드</th>
                                <th width="20%">계정명</th>
                                <th width="15%">변동고정구분</th>
                                <th width="15%">비고</th>
                                <th></th>
                                <th></th>
                            </tr>
                            </thead>
                            <tbody>
                                <tr bgcolor="#F7F7F7">
                                    <td> <input type="text" id="pl_cd" class="form-control" placeholder="plcd"></td>
                                    <td> <input type="text" id="pl_nm" class="form-control" placeholder="plname"></td>
                                    <td> <input type="text" id="accnt_cd" class="form-control" placeholder="accntcd"></td>
                                    <td> <input type="text" id="accnt_nm" class="form-control" placeholder="accntnm"></td>
                                    <td>
                                        <select class="fv_div">
                                            <option value="">F</option>
                                            <option value="">V</option>
                                        </select>
                                    </td>
                                    <td> <input type="text" id="costeleaccnt_rmrk" class="form-control" placeholder="remark"></td>
                                    <td>
                                        <button onclick="insertCosteleaccnt();" class="btn btn-default btn-sm">저장</button>
                                    </td>
                                    <td></td>
                                </tr>
                            </tbody>
                            {% if rsCosteleaccnt %}
                            <tbody>
                            {% for i in rsCosteleaccnt %}
                            <tr>
                                <td>
                                    {{ i.pl_cd }}
                                </td>
                                <td>
                                    {{ i.pl_nm }}
                                </td>
                                <td>
                                    {{ i.accnt_cd }}
                                </td>
                                <td>
                                    {{ i.accnt_nm }}
                                </td>
                                <td>
                                    {{ i.fv_div }}
                                </td>
                                <td>
                                    {{ i.costeleaccnt_rmrk }}
                                </td>
                                <td>
                                    <button onclick="" class="btn btn-default btn-sm">수정</button>
                                </td>
                                <td>
                                    <button onclick="" class="btn btn-default btn-sm">삭제</button>
                                </td>
                            </tr>
                            {% endfor %}
                            </tbody>
                            {% else %}
                            <tbody>
                                <td>
                                    <span>Costeleaccnt 데이터가 없습니다!</span>
                                </td>
                            </tbody>
                            {% endif %}
                        </table>
                    </div>
                </section>
            </div>
        </div>
        </section>
        <!--main content end-->
    </section>
    <!-- container section start -->

{% endblock %}